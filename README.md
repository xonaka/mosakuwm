# mosakuwm 

mosakuwmは、Pythonで書かれた軽量でカスタマイズ可能なXウィンドウマネージャです。初心者でも簡単に使い始めることができ、生産性を向上させるための機能を提供します。

## 特徴

- 🎯 シンプルで直感的な操作
- 🖥️ マルチモニターサポート
- 🎨 カスタマイズ可能なレイアウトプリセット
- 🚀 スムーズなウィンドウアニメーション
- 🎮 使いやすいキーバインド
- 🔧 柔軟な設定オプション

## 必要条件

- Python 3.6以上
- X Window System
- python-xlib

## インストール方法

1. 必要なパッケージをインストール：

```bash
sudo apt-get install python3-xlib  # Debian/Ubuntuの場合
# または
pip3 install python-xlib
```

2. リポジトリをクローン：

```bash
git clone https://github.com/yourusername/mosakuwm.git
cd mosakuwm
```

3. 実行権限を付与：

```bash
chmod +x mosakuwm
```

## 基本的な使い方

| 操作 | キーバインド | 説明 |
|------|------------|------|
| ウィンドウ移動 | Alt + Ctrl + i | アクティブウィンドウを次の位置に移動 |
| ターミナル起動 | Alt + Ctrl + 1 | 新しいターミナルウィンドウを開く |
| エディタ起動 | Alt + Ctrl + 2 | テキストエディタを開く |
| ブラウザ起動 | Alt + Ctrl + 3 | デフォルトブラウザを開く |
| 左半分に配置 | Alt + Ctrl + h | アクティブウィンドウを画面左半分に配置 |
| 右半分に配置 | Alt + Ctrl + l | アクティブウィンドウを画面右半分に配置 |
| 上半分に配置 | Alt + Ctrl + k | アクティブウィンドウを画面上半分に配置 |
| 下半分に配置 | Alt + Ctrl + j | アクティブウィンドウを画面下半分に配置 |
| 次のモニターに移動 | Alt + Ctrl + n | アクティブウィンドウを次のモニターに移動 |
| グリッド配置 | Alt + Ctrl + t | ウィンドウをグリッド状に自動配置 |
| 仮想スクリーン切替 | Alt + F1-F4 | 仮想スクリーン1-4に切り替え |
| ウィンドウを次の仮想スクリーンへ | Alt + Ctrl + d | アクティブウィンドウを次の仮想スクリーンに移動 |
| ウィンドウを前の仮想スクリーンへ | Alt + Ctrl + a | アクティブウィンドウを前の仮想スクリーンに移動 |

## レイアウトプリセット機能

### プリセットの基本概念

プリセットは、ウィンドウの配置とサイズを保存し、後で再利用できる機能です。以下の情報が保存されます：

- ウィンドウの位置と大きさ
- 分割方式（グリッド/水平/垂直）
- メインペインの比率
- ウィンドウの優先順位

### プリセットの種類

1. **ビルトインプリセット**
   - `coding`: エディタを中心としたコーディング用レイアウト
   - `web`: ブラウザとエディタの組み合わせ
   - `terminal`: 複数のターミナルを効率的に配置

2. **カスタムプリセット**
   - 現在の配置を保存（Alt + Shift + s）
   - 名前と説明を付けて管理
   - カテゴリによる分類が可能

### プリセットの管理

1. **プリセットの表示と検索**
   - 一覧表示（Alt + Shift + p）
     - カテゴリごとの整理
     - 優先度による並び替え
     - 使用頻度の表示
   - 検索機能（Alt + Shift + f）
     - 名前による検索
     - カテゴリによるフィルタリング

2. **プリセットのカスタマイズ**
   - 編集（Alt + Shift + e）
     - 名前と説明の変更
     - ウィンドウ配置の調整
   - カテゴリ設定（Alt + Shift + c）
   - 優先度設定（Alt + Shift + r）

3. **自動適用ルール**
   - 特定のアプリケーション起動時
   - 時間帯による自動切り替え
   - モニター接続時の自動適用

4. **インポート/エクスポート**
   - プリセットの共有（Alt + Shift + x）
   - 他の環境からの読み込み（Alt + Shift + i）
   - JSONフォーマットでの保存

## マルチモニター機能

### 基本機能

1. **モニター検出**
   - 自動検出と設定
   - ホットプラグ対応（接続/切断時の自動認識）
   - プライマリモニターの設定

2. **ウィンドウ管理**
   - モニター間のウィンドウ移動（Alt + Ctrl + n）
   - 各モニターでの独立したレイアウト
   - ドラッグ＆ドロップによる移動

### モニターごとの設定

1. **個別レイアウト**
   - モニターごとに異なるプリセットを適用可能
   - 画面サイズに応じた自動調整
   - レイアウトの独立した保存

2. **ウィンドウルール**
   - 特定のアプリケーションを指定モニターで起動
   - モニターごとの優先ウィンドウ設定
   - フローティングウィンドウの設定

3. **自動配置**
   - モニター接続時の自動レイアウト適用
   - ウィンドウタイプに基づく自動振り分け
   - プライマリモニターの優先設定

### マルチモニター設定例

```python
# ~/.config/xdumonpy/config.py

# モニターごとのデフォルトプリセット
MONITOR_PRESETS = {
    'HDMI-1': 'coding',    # メインモニター：コーディング
    'DP-1': 'web',        # サブモニター：ウェブ作業
    'eDP-1': 'terminal'   # ノートPC画面：ターミナル
}

# ウィンドウルール
WINDOW_RULES = {
    'emacs': {
        'monitor': 'HDMI-1',     # エディタは常にメインモニター
        'floating': False,       # タイル配置を強制
        'special_color': True    # 特別なフレーム色を使用
    },
    'google-chrome': {
        'monitor': 'DP-1',       # ブラウザはサブモニター
        'position': 'center'     # 中央に配置
    }
}
```

### トラブルシューティング

1. **モニター認識の問題**
   - `xrandr`コマンドで接続状態を確認
   - モニターの解像度とスケーリングの確認
   - 設定ファイルでのモニター名の確認

2. **レイアウトの問題**
   - プリセットの再適用
   - ウィンドウルールの確認
   - 設定の再読み込み（Alt + Ctrl + Shift + R）

## カスタマイズ

設定ファイルは `~/.config/xdumonpy/config.py` に配置されます。以下の項目をカスタマイズできます：

- キーバインド
- フレームの色とサイズ
- デフォルトアプリケーション
- ウィンドウルール
- レイアウトプリセット

### 設定例

```python
# ~/.config/xdumonpy/config.py
from Xlib import X

# アプリケーション設定
TERMINAL = 'urxvt'
EDITOR = 'emacs'
BROWSER = 'google-chrome'

# フレーム設定
FRAME_COLOR = 'SteelBlue3'
FRAME_THICKNESS = 2

# キーバインド
KEY_BINDS = {
    ('Tab', X.Mod1Mask): {'method': 'cb_focus_next_window'},
    ('t', X.Mod1Mask): {'method': 'cb_tile_windows'},
    ('m', X.Mod1Mask): {'method': 'cb_move_window_to_next_monitor'},
}
```

## トラブルシューティング

1. **ウィンドウマネージャが起動しない**
   - X Window Systemが正しくインストールされているか確認
   - python-xlibが正しくインストールされているか確認

2. **キーバインドが機能しない**
   - 他のアプリケーションとのキーバインドの競合を確認
   - 設定ファイルの構文を確認

3. **モニターが認識されない**
   - xrandrコマンドで出力を確認
   - モニターの接続を確認

